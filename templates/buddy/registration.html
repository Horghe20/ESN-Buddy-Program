<link href="{{ url_for('static', filename='css/style_registration.css') }}" rel="stylesheet">
{% extends 'layout.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center text-primary mb-4">Buddy Program! Looking for a buddy?</h2>
    <h6 class="text-center text-muted mb-4">The Buddy program allows everyone to have an ally, friend, and support in your Erasmus city! Not sure where to start? Start with ESN! ESN Palermo will be happy to accompany you on your Erasmus journey.</h6>
    
    <form id="buddy-form">
        <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control border-0 shadow-sm" id="name" name="name" required placeholder="Enter your name">
        </div>

        <div class="mb-3">
            <label for="surname" class="form-label">Surname</label>
            <input type="text" class="form-control border-0 shadow-sm" id="surname" name="surname" required placeholder="Enter your surname">
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control border-0 shadow-sm" id="email" name="email" required placeholder="Enter your email">
        </div>

        <div class="mb-3">
            <label for="nationality" class="form-label">Nationality</label>
            <select class="form-select border-0 shadow-sm" id="nationality" name="nationality" required>
                <option value="" disabled selected>Select your nationality</option>
                {% for nationality in data.nationalities %}
                    <option value="{{ nationality }}">{{ nationality }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="languages" class="form-label">Languages Spoken <small class="text-muted">(Choose up to 5)</small></label>
            <div id="languages-container" class="form-control border-0 shadow-sm item-container">
                {% for language in data.languages %}
                    <div class="item" onclick="selectLanguage('{{ language }}')">{{ language }}</div>
                {% endfor %}
            </div>
        </div>

        <div class="mb-3">
            <label for="selected-languages" class="form-label">Selected Languages</label>
            <div id="selected-languages" class="form-control border-0 shadow-sm"></div>
        </div>

        <div class="mb-3">
            <label for="faculty" class="form-label">Faculty</label>
            <select class="form-select border-0 shadow-sm" id="faculty" name="faculty">
                <option value="" disabled selected>Select your faculty</option>
                {% for faculty in data.faculties %}
                    <option value="{{ faculty }}">{{ faculty }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">Phone Number <small class="text-muted">(Include country prefix)</small></label>
            <input type="text" class="form-control border-0 shadow-sm" id="phone" name="phone" required 
                placeholder="e.g., +39XXXXXXXXXX" 
                pattern="^\+\d{1,3}\d{4,14}$" 
                oninvalid="setCustomValidity('Please enter a valid phone number with country prefix (e.g., +39XXXXXXXXXX).')"
                oninput="setCustomValidity('')">
            <div class="invalid-feedback">Please enter a valid phone number with the correct prefix.</div>
        </div>

        <div class="mb-3">
            <label for="instagram" class="form-label">Instagram <small class="text-muted">(Username only)</small></label>
            <input type="text" class="form-control border-0 shadow-sm" id="instagram" name="instagram" placeholder="e.g., yourusername">
        </div>

        <div class="mb-3">
            <label for="telegram" class="form-label">Telegram <small class="text-muted">(Username only)</small></label>
            <input type="text" class="form-control border-0 shadow-sm" id="telegram" name="telegram" placeholder="e.g., yourusername">
        </div>

        <div class="mb-3">
            <label for="interests" class="form-label">Interests <small class="text-muted">(Choose between 5 and 15)</small></label>
            <div id="interests-container" class="form-control border-0 shadow-sm item-container">
                {% for interest in data.interests %}
                    <div class="item" onclick="selectInterest('{{ interest }}')">{{ interest }}</div>
                {% endfor %}
            </div>
        </div>

        <div class="mb-3">
            <label for="selected-interests" class="form-label">Selected Interests</label>
            <div id="selected-interests" class="form-control border-0 shadow-sm"></div>
        </div>

        <div class="mb-3">
            <label for="gender" class="form-label">Gender</label>
            <select class="form-select border-0 shadow-sm" id="gender" name="gender" required>
                <option value="" disabled selected>Select your gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="semester" class="form-label">Arrival Semester</label>
            <select class="form-select border-0 shadow-sm" id="semester" name="semester" required>
                <option value="" disabled selected>Select your semester</option>
                <option value="Winter">Winter (September - January)</option>
                <option value="Summer">Summer (February - June)</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="year" class="form-label">Year <small class="text-muted">(Your arrival year)</small></label>
            <input type="number" class="form-control border-0 shadow-sm" id="year" name="year" min="2025" placeholder="Enter your arrival year" required>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control border-0 shadow-sm" id="description" name="description" rows="3" placeholder="Tell us about yourself"></textarea>
        </div>

        <button type="submit" class="btn btn-outline-primary w-100" id="submit-btn">Submit</button>
        <small class="d-block mt-2 text-muted text-center">
            By submitting, you accept the <a href="{{url_for('term_and_Condition')}}" target="_blank" rel="noopener noreferrer" class="text-decoration-none">Terms & Conditions</a>.
        </small>
    </form>
</div>

<!-- Modal -->
<div class="modal fade" id="validationModal" tabindex="-1" aria-labelledby="validationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content border-0 shadow">
            <div class="modal-header border-bottom-0">
                <h5 class="modal-title" id="validationModalLabel">Validation Error</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-muted" id="validationModalBody">
                <!-- Validation message will be inserted here -->
            </div>
            <div class="modal-footer border-top-0">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/buddy/registration.js') }}"></script>
{% endblock %}